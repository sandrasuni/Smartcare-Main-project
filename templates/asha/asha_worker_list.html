{% extends 'asha/layout_asha.html' %}

{% load static %}


{% block content %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display All Data</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
    <style>
        /* Custom styles for better spacing */
        h3 {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        table {
            margin-bottom: 30px;
        }
        .btn-add {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Add Button -->
        <a href="{% url 'save_household' %}" class="btn btn-primary btn-add">Add New Household</a>

        <!-- Household Data -->
        <h3>Household Data</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Head of Household</th>
                    <th>Address</th>
                    <th>Contact Number</th>
                </tr>
            </thead>
            <tbody>
                {% for household in households %}
                <tr>
                    <td>{{ household.head_of_household }}</td>
                    <td>{{ household.address }}</td>
                    <td>{{ household.contact_number }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Family Members -->
        <h3>Family Members</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Occupation</th>
                </tr>
            </thead>
            <tbody>
                {% for member in family_members %}
                <tr>
                    <td>{{ member.household.head_of_household }}</td>
                    <td>{{ member.name }}</td>
                    <td>{{ member.age }}</td>
                    <td>{{ member.gender }}</td>
                    <td>{{ member.occupation }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Chronic Illnesses -->
        <h3>Chronic Illnesses</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                  <th>Household</th>
                    <th>Family Member</th>
                    <th>Illness</th>
                    <th>Medications Prescribed</th>
                    <th>Following Medication</th>
                </tr>
            </thead>
            <tbody>
                {% for illness in chronic_illnesses %}
                <tr>
                  <td>{{ illness.family_member.household.head_of_household }}</td>
                    <td>{{ illness.family_member.name }}</td>
                    <td>{{ illness.illness }}</td>
                    <td>{{ illness.medications_prescribed }}</td>
                    <td>{{ illness.following_medication }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Follow-Up Patients -->
        <h3>Follow-Up Patients</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                  <th>Household</th>
                    <th>Family Member</th>
                    <th>Diagnosis</th>
                    <th>Last Checkup Date</th>
                    <th>Next Follow-Up Date</th>
                </tr>
            </thead>
            <tbody>
                {% for patient in follow_up_patients %}
                <tr>
                  <td>{{ patient.family_member.household.head_of_household }}</td>
                    <td>{{ patient.family_member.name }}</td>
                    <td>{{ patient.diagnosis }}</td>
                    <td>{{ patient.last_checkup_date }}</td>
                    <td>{{ patient.next_followup_date }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Sanitation & Hygiene -->
        <h3>Sanitation & Hygiene</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Has Toilet</th>
                    <th>Has Clean Drinking Water</th>
                    <th>Has Handwashing Facility</th>
                </tr>
            </thead>
            <tbody>
                {% for sanitation in sanitation_hygiene %}
                <tr>
                    <td>{{ sanitation.household.head_of_household }}</td>
                    <td>{{ sanitation.has_toilet }}</td>
                    <td>{{ sanitation.has_clean_drinking_water }}</td>
                    <td>{{ sanitation.has_handwashing_facility }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Child Health -->
        <h3>Child Health</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Child Name</th>
                    <th>Age</th>
                    <th>Birth Weight</th>
                    <th>Immunization Status</th>
                    <th>Nutritional Status</th>
                    <th>Vaccination Done</th>
                    <th>Vaccination Due Date</th>
                </tr>
            </thead>
            <tbody>
                {% for child in child_health %}
                <tr>
                    <td>{{ child.family_member.head_of_household }}</td>
                    <td>{{ child.child_name }}</td>
                    <td>{{ child.child_age }}</td>
                    <td>{{ child.birth_weight }}</td>
                    <td>{{ child.immunization_status }}</td>
                    <td>{{ child.nutritional_status }}</td>
                    <td>{{ child.vaccination_done }}</td>
                    <td>{{ child.vaccination_due_date }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Visit Details -->
        <h3>Visit Details</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Date & Time</th>
                    <th>Reason for Visit</th>
                    <th>Symptoms Reported</th>
                </tr>
            </thead>
            <tbody>
                {% for visit in visit_details %}
                <tr>
                    <td>{{ visit.household.head_of_household }}</td>
                    <td>{{ visit.date_time }}</td>
                    <td>{{ visit.reason_for_visit }}</td>
                    <td>{{ visit.symptoms_reported }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Pregnant Women -->
        <h3>Pregnant Women</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Name</th>
                    <th>Expected Delivery Date</th>
                    <th>Antenatal Checkups Completed</th>
                </tr>
            </thead>
            <tbody>
                {% for woman in pregnant_women %}
                <tr>
                    <td>{{ woman.household.head_of_household }}</td>
                    <td>{{ woman.name }}</td>
                    <td>{{ woman.expected_delivery_date }}</td>
                    <td>{{ woman.antenatal_checkups_completed }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Emergency Referrals -->
        <h3>Emergency Referrals</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Critical Health Issue</th>
                    <th>Referred to Health Center</th>
                    <th>Referral Details</th>
                </tr>
            </thead>
            <tbody>
                {% for referral in emergency_referrals %}
                <tr>
                    <td>{{ referral.household.head_of_household }}</td>
                    <td>{{ referral.critical_health_issue }}</td>
                    <td>{{ referral.referred_to_health_center }}</td>
                    <td>{{ referral.referral_details }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Health Education -->
        <h3>Health Education</h3>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Household</th>
                    <th>Nutrition</th>
                    <th>Breastfeeding</th>
                    <th>Family Planning</th>
                    <th>Sanitation & Hygiene</th>
                </tr>
            </thead>
            <tbody>
                {% for education in health_education %}
                <tr>
                    <td>{{ education.visit.head_of_household }}</td>
                    <td>{{ education.nutrition }}</td>
                    <td>{{ education.breastfeeding }}</td>
                    <td>{{ education.family_planning }}</td>
                    <td>{{ education.sanitation_hygiene }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Bootstrap JS (Optional, for interactive components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    {% endblock %}